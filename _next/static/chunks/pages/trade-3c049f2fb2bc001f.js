(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[54],{32786:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trade",function(){return r(94885)}])},57919:function(e,t,r){"use strict";r.d(t,{Bb:function(){return d},Fq:function(){return n},KX:function(){return i},fu:function(){return l},mW:function(){return o},pK:function(){return u},wG:function(){return c}}),r(23732);var a=r(34332),s=r(88767);let i=()=>{let{stats:e}=(0,a.Z)();return(0,s.useQuery)(["global-query"],()=>{if(!e.isSuccess)throw Error("Initializing global stats error");return e.data.global},{enabled:Boolean(void 0!==e.data)})},o=e=>{let{stats:t}=(0,a.Z)();return(0,s.useQuery)(["tokenStats",e],()=>{if(!t.isSuccess)throw Error("No stats");if(""===e)throw Error("No token");let r=t.data.assets[e];if(!r)throw Error("tokenStats not found for ".concat(e));return r},{enabled:Boolean(t.isSuccess&&""!==e)})},n=e=>{let{stats:t}=(0,a.Z)();return(0,s.useQuery)(["price-stats",JSON.stringify(t)],async()=>{if(!t.isSuccess)throw Error("No stats");if(!e)throw Error("No asset name");return t.data.assets[e].price},{enabled:Boolean(t.isSuccess&&void 0!==e)})},l=()=>{let{config:e,stats:t}=(0,a.Z)(),r=null==e?void 0:e.getAssets();return(0,s.useQuery)(["multi-price-stats",JSON.stringify(r),JSON.stringify(t.data)],async()=>{if(!r)throw Error("No config found");if(!t.isSuccess)throw Error("No stats found");let e={};for(let[a,s]of Object.entries(t.data.assets)){var i;e={...e,[null==r?void 0:null===(i=r[a])||void 0===i?void 0:i.address]:s.price}}return e},{enabled:Boolean(r&&t.isSuccess),staleTime:12e4,refetchOnWindowFocus:!1,refetchOnMount:!1})},d=()=>{let{stats:e}=(0,a.Z)();return(0,s.useQuery)(["collaterals-stats"],()=>{if(!e.isSuccess)throw Error("Initializing collateral stats error");let t={},{assets:r}=e.data;return Object.entries(r).forEach(e=>{let[r,a]=e,{collateral:s,price:i,assetConfig:o}=a;"collateral"in a&&(t={...t,[r]:{collateral:s,price:i,assetConfig:o}})}),t},{enabled:Boolean(void 0!==e.data)})},c=()=>{let{stats:e}=(0,a.Z)();return(0,s.useQuery)(["reserves-stats"],()=>{if(!e.isSuccess)throw Error("Initializing reserves stats error");let t={},{assets:r}=e.data;return Object.entries(r).forEach(e=>{let[r,a]=e,{reserve:s,price:i,assetConfig:o}=a;"reserve"in a&&(t={...t,[r]:{reserve:s,price:i,assetConfig:o}})}),t},{enabled:Boolean(void 0!==e.data)})},u=e=>{let{stats:t}=(0,a.Z)();return(0,s.useQuery)(["collateral-rewards-stats",e],async()=>{var r,a,s,i,o;if(!t.isSuccess)throw Error("collateral rewards ".concat(e," stats issue: main stats error"));let{assets:n}=t.data;return null!==(o=null!==(i=null===(r=n[e].collateral.AAVE)||void 0===r?void 0:r.rewards)&&void 0!==i?i:null===(a=n[e].collateral.Convex)||void 0===a?void 0:a.rewards)&&void 0!==o?o:null===(s=n[e].collateral.Stargate)||void 0===s?void 0:s.rewards},{enabled:Boolean(void 0!==t.data&&t.isSuccess)})}},94885:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return K}});var a=r(85893),s=r(9008),i=r.n(s),o=r(11163),n=r(67294),l=r(93330),d=r(24035),c=r(65982),u={src:"/_next/static/media/icon_arrowDown.78d11970.svg",height:20,width:19},p=r(35106),v=r(5586),h=r(33096),f=r(58091),g=r(46558),x=r(88767),m=r(41636),y=r(34332),w=r(95862),S=r(56371),b=r(61744);async function j(e,t,r,a){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];console.log("isBuying inside quote: ",s);let i=new URL("https://api.0x.org/swap/v1/quote");i.searchParams.set("sellToken",e),i.searchParams.set("".concat(s?"buy":"sell","Amount"),r.toString()),i.searchParams.set("buyToken",t),i.searchParams.set("slippagePercentage",(a/100).toString()),console.log("check link: ",i.href),console.log("update check");let{allowanceTarget:o,sellAmount:n,buyAmount:l,data:d}=await (await fetch(i.href,{method:"GET",headers:{"0x-api-key":"0381d783-b9ac-4c7d-abb0-d02fb8fa5efc"}})).json();return{contract:o,from:{amount:E(n),address:e},to:{amount:E(l),address:t},slippage:a,data:d}}let E=e=>b.parseUnits(e,0);function Z(e,t,r,a,s,i){let o=(0,w.Z)(),{account:l}=(0,g.Z)(),d=n.useMemo(()=>{if(!r||!a)return(0,S.parseEther)("0");let e="0";e=r;try{return(0,S.parseUnits)(e,a)}catch(t){console.error("error here with ".concat(r," ").concat(a),t)}},[r,a]);return(0,x.useQuery)(["trade-quote",e,t,l,r,a,s,i],async()=>{if(!m.ZeroEx)throw Error("Trade class not existing");if(!e)throw Error("selling address not found");if(!t)throw Error("buying address not found");if(!d)throw Error("parsed amount not calculated");if(!s)throw Error("slippage not found");if(!o.isSuccess)throw Error("trade fee mantissa failed to query");let r=d.mul(o.data).div((0,S.parseEther)("1")),a=d.mul((0,S.parseEther)("0.01")).div((0,S.parseEther)("1"));return await j(e,t,i?d.sub(r).sub(a):d.sub(r),s)},{enabled:Boolean(m.ZeroEx&&void 0!==e&&void 0!==t&&(null==d?void 0:d.gt(0))&&s),staleTime:12e4})}let T=(e,t,r,a,s,i)=>{let{ledger:o}=(0,y.Z)(),l=(0,w.Z)(),d=n.useMemo(()=>{if(!r||!a)return(0,S.parseEther)("0");let e="0";e=r;try{return(0,S.parseUnits)(e,a)}catch(t){console.error("error here with ".concat(r," ").concat(a),t)}},[r,a]);return(0,x.useQuery)(["encoded-quote",e,t,r,s,i],async()=>{if(!m.ZeroEx)throw Error("Encoded quote get error: ZeroEx class not found");if(!t||!e)throw Error("Encoded quote get error: addresses not complete");if(!d||d.isZero())throw Error("Encoded quote get error: No amount inputted");if(!l.isSuccess)throw Error("Encoded quote get error: Trade fee mantissa failed to query");let r=d.mul(l.data).div((0,S.parseEther)("1")),a=d.mul((0,S.parseEther)("0.01")).div((0,S.parseEther)("1"));return await m.ZeroEx.encodedQuote(e,t,i?d.sub(r).sub(a):d.sub(r),s)},{enabled:Boolean(m.ZeroEx&&o&&l.isSuccess&&void 0!==e&&void 0!==t&&(null==d?void 0:d.gt(0))&&s)})};var F=r(43382),k=r(23732),C=r(66319),N=r(66260),U=r(47741),L=r(71197),B=r(30489),Q={src:"/_next/static/media/icon_slippage.b71d00fd.svg",height:19,width:19},A={src:"/_next/static/media/icon_chevDown_white.37b193fb.svg",height:7,width:12};let _={initial:{transform:"rotate(0deg)"},animate:{transform:"rotate(180deg)"}},I=e=>{let{slippageOptions:t,slippageValue:r,setSlippageValue:s,isCustomSlippage:i,setIsCustomSlippage:o}=e,[l,d]=n.useState(!1);return n.useEffect(()=>{i&&(document.getElementById("slip_input").focus(),s("0"))},[i,s]),(0,a.jsxs)(h.Z,{display:"grid",gridAutoFlow:"row",gridGap:"0.5rem",marginInline:"auto",marginBlock:"-1rem 2rem",width:"100%",maxWidth:"356px",children:[(0,a.jsxs)(U.zx,{variant:"unstyled",display:"flex",gap:"0.8rem",justifyContent:"center",alignItems:"center",onClick:()=>d(!l),children:[(0,a.jsx)(h.u,{height:"19px",width:"19px",animate:l?{transform:"translateY() rotate(180deg)"}:{transform:"rotate(0deg)"},transition:{ease:"backOut",duration:"0.3"},children:(0,a.jsx)(c.Z,{src:Q,alt:"slippage-icon",style:l?void 0:{filter:"brightness(0.5)"}})}),(0,a.jsxs)(f.Z,{layerStyle:"leverTradeSubText",color:l?"lever.main":"lever.sub",fontWeight:"normal",children:["Slippage Tolerance ",i?r:parseFloat(r),"%"]}),(0,a.jsx)(h.u,{variants:_,animate:l?"animate":"initial",sx:{filter:l?void 0:"brightness(0.5)"},children:(0,a.jsx)(c.Z,{src:A,alt:"white-arrow",height:"7.05px",width:"11.61px"})})]}),(0,a.jsx)(L.UO,{in:Boolean(l),children:(0,a.jsxs)(h.Z,{display:"grid",gridAutoFlow:"column",gridGap:"0.5rem",children:[t.map((e,t)=>(0,a.jsx)(U.zx,{variant:"lever-outline",color:r===e?"lever.main":"lever.sub",borderColor:r===e?"lever.accent":"lever.sub",onClick(){o(!1),s(e)},children:(0,a.jsxs)(f.Z,{variant:"slippage-text",children:[parseFloat(e),"%"]})},t)),(0,a.jsx)(h.Z,{margin:0,padding:0,pos:"relative",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.II,{id:"slip_input",type:"text",variant:"slippage-outlined",bg:"none",border:"2px solid",borderColor:i?"lever.accent":"lever.sub",transition:"0.4s",color:"lever.main",fontWeight:"normal",borderRadius:"10px",paddingRight:"2rem",placeholder:"0",width:"80px",_focus:{borderColor:"lever.accent"},min:0,value:r,onChange(e){isNaN(Number(e.target.value))||(o(!0),s(e.target.value))}}),(0,a.jsx)(f.Z,{pos:"absolute",top:"50%",right:"2rem",transform:"translateY(-50%)",color:"lever.main",children:"%"})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(U.zx,{variant:"lever-outline",onClick(){o(!0)},cursor:"text",children:(0,a.jsx)(f.Z,{variant:"slippage-text",children:"Custom"})})})})]})})]})};var O=r(3588),q=r(55678),z=r(49310),M=r(46986),R=r(32631),P=r(57919);let W=(e,t)=>{let r=(0,O.Z)(),{account:a}=(0,g.Z)(),{config:s,ledger:i}=(0,y.Z)();return(0,x.useQuery)(["use-all-capacities",null==e?void 0:e.asset,e.price,null==t?void 0:t.asset,null==t?void 0:t.price],async()=>{var a,o,n,l,d,c;if(!r.isSuccess)throw Error("sell capacity query, user liquidity missing");if(!s||!i)throw Error("sell capacity query, config or ledger not found");let u=[null==s?void 0:s.getAsset(null==e?void 0:e.asset),null==s?void 0:s.getAsset(null==t?void 0:t.asset)],p=(null==u?void 0:null===(a=u[0])||void 0===a?void 0:a.address)?await i.getUserPosition(null==u?void 0:null===(o=u[0])||void 0===o?void 0:o.address):(0,S.parseEther)("0"),v=p.gt(0)?parseFloat((0,S.formatUnits)(p,null==u?void 0:null===(n=u[0])||void 0===n?void 0:n.decimals))*e.price:0,h=(null==u?void 0:null===(l=u[1])||void 0===l?void 0:l.address)?await i.getUserPosition(null==u?void 0:null===(d=u[1])||void 0===d?void 0:d.address):(0,S.parseEther)("0"),f=h.lt(0)?parseFloat((0,S.formatUnits)(h,null==u?void 0:null===(c=u[1])||void 0===c?void 0:c.decimals))*t.price:0,g=()=>{let e=r.data[m.CALCULATE_LIQUIDITY_INDEX.availableLeverageUsd];return 0>=Number((0,S.formatEther)(e))?0:Number((0,S.formatEther)(e))};return[(0,N.RR)((g()+v+Math.abs(f))/e.price),(0,N.RR)((g()+v+Math.abs(f))/t.price)]},{enabled:Boolean(""!=a&&s&&i&&(e.asset&&e.price||t.asset&&t.price)),refetchOnWindowFocus:!1,refetchOnMount:"always",retry:3})};var D=r(45158);let V=(e,t,r)=>{let{account:a}=(0,g.Z)(),{ledger:s}=(0,y.Z)(),{amount:i,price:o,position:n,config:l}=e,{amount:d,price:c,position:u,config:p}=t;return(0,x.useQuery)(["predicted-leverage-used",a,e,t],async()=>{if(!a||!s)throw Error("Calculating leverage used error: no account or ledger found");if(!o||!c||!n||!u||!l||!p)throw Error("Calculating leverage used: one args missing");let r=await s.getPredictedLeverageUsed(e,t);return r<0?0:r>5?5:r},{enabled:Boolean(a&&o&&c&&n&&u&&l&&p&&s&&r),refetchOnWindowFocus:!1})};var G=r(77197);let J=["0.5","1","3"],Y=e=>{let{push:t}=(0,o.useRouter)(),{account:r,tradeMutate:s,showConnect:i,isUserAbleToTrade:n,allAccountData:l,quote:d}=e;return r?(0,a.jsx)(p.Z,{isLoading:s.isLoading||d.isLoading||d.isFetching,onClick(){s.mutate()},children:"Trade"}):(0,a.jsxs)(p.Z,{onClick:()=>i(!0),isLoading:s.isLoading||d.isLoading||d.isFetching,children:[" ","Connect Wallet"]})},X=()=>{var e,t,r,s,o,p,m,w,b,j,E,B;let Q=(0,x.useQueryClient)(),{account:A,setOpenUIConnect:_,isConnected:X,chainId:K}=(0,g.Z)(),{trade:$,leverageUsedPrediction:H,setPredictedLeverage:ee}=(0,F.Z)(),{setSelectedTokenA:et,setSelectedTokenB:er}=$,{ledger:ea}=(0,y.Z)(),[es,ei]=n.useState(""),[eo,en]=n.useState(""),el=(0,k.JM)(es),ed=(0,k.JM)(eo),ec=(0,C.cA)(),[eu,ep]=n.useState("0.5"),[ev,eh]=n.useState(!1),[ef,eg]=n.useState(""),[ex,em]=n.useState(""),[ey,ew]=n.useState(0),[eS,eb]=n.useState(""),[ej,eE]=n.useState(!1),eZ=Z(ej?ed.isSuccess?ed.data.address:"":el.isSuccess?el.data.address:"",ej?el.isSuccess?el.data.address:"":ed.isSuccess?ed.data.address:"","1",ej?ed.isSuccess?ed.data.decimals:18:el.isSuccess?el.data.decimals:18,5),eT=(0,O.Z)(),eF=(0,P.wG)(),[ek,eC]=n.useReducer((e,t)=>{let{stats:r,tokenA:a,tokenB:s}=t;return r?{a:a?r[a].price:0,b:s?r[s].price:0}:e},{a:0,b:0}),eN=W({asset:es,price:ek.a},{asset:eo,price:ek.b}),eU=n.useMemo(()=>null!=eN&&!!eN.data&&"0"!=ef&&parseFloat(ef)==parseFloat(eN.data[0]),[ef,eT,ek.a]),eL=Z(null===(e=el.data)||void 0===e?void 0:e.address,null===(t=ed.data)||void 0===t?void 0:t.address,ef,null===(r=el.data)||void 0===r?void 0:r.decimals,ev?parseFloat(eu)/100:parseFloat(eu),eU),eB=T(null===(s=el.data)||void 0===s?void 0:s.address,null===(o=ed.data)||void 0===o?void 0:o.address,ef,null==el?void 0:null===(p=el.data)||void 0===p?void 0:p.decimals,ev?parseFloat(eu)/100:parseFloat(eu),eU),eQ=n.useMemo(()=>{if(!ec.isSuccess)return!1;let e=0;for(let[,t]of Object.entries(ec.data))e+=parseFloat(t.collateral.toString());return e>0},[ec,X,A]),eA=(0,x.useQuery)(["token-a-position",el.data,A],async()=>{if(!ea)throw Error("token a position error: ledger not initialized");if(!A)throw Error("token a position error: user not connected");if(!el.isSuccess)throw Error("token a position error: token info not yet ready");return await ea.getUserPosition(el.data.address)},{enabled:Boolean(el.isSuccess&&A&&ea),refetchOnWindowFocus:!1}),e_=(0,x.useQuery)(["token-b-position",ed.data,A],async()=>{if(!ea)throw Error("token b position error: ledger not initialized");if(!A)throw Error("token b position error: user not connected");if(!ed.isSuccess)throw Error("token b position error: token info not yet ready");return await ea.getUserPosition(ed.data.address)},{enabled:Boolean(ed.isSuccess&&A&&ea),refetchOnWindowFocus:!1}),eI=V({amount:parseFloat(ef),price:ek.a,position:eA.isSuccess?eA.data:void 0,config:el.isSuccess?el.data:void 0},{amount:parseFloat(ex),price:ek.b,position:e_.isSuccess?e_.data:void 0,config:ed.isSuccess?ed.data:void 0},Boolean(!eL.isIdle||!eL.isLoading)),eO=(0,x.useMutation)(["trade-mutation",A],async()=>{if(!ea)throw Error("Ledger class not initialized");if(!el.isSuccess)throw Error("Token A not initialized");if(!ed.isSuccess)throw Error("Token B not initialized");if("0"===ef||isNaN(Number(ef)))throw Error("Invalid amount, please try again");if(!eB.isSuccess)throw Error("Encoded data not yet initialized");console.log({isTradeAmountMaxed:eU,tradeFnTradeAmount:eU?(parseFloat(ef)-.01*parseFloat(ef)).toString():ef});let e=(0,S.parseUnits)(eU?(parseFloat(ef)-.01*parseFloat(ef)).toFixed(6):ef,el.data.decimals),t=parseFloat((await ea.trade(el.data.address,ed.data.address,e,eB.data,void 0,!0)).toString());t=Number((t*D.aF).toFixed(0));let r=await ea.trade(el.data.address,ed.data.address,e,eB.data,{gasLimit:t});return await r.wait()},{onMutate(e){console.log({variables:e})},async onSuccess(){await Q.invalidateQueries("token-a-position"),await Q.invalidateQueries("token-b-position"),await Q.invalidateQueries("open-positions"),await Q.invalidateQueries("calculate-liquidity-data"),await Q.invalidateQueries("user-asset-info-multicall-collateral"),await Q.invalidateQueries("user-asset-info-multicall-reserves"),await Q.invalidateQueries("sell-capacity"),await Q.invalidateQueries("predicted-leverage-used"),await Q.invalidateQueries("leverage-used"),await Q.invalidateQueries("use-get-subgraph-data"),await Q.invalidateQueries("trade-history"),await fetch("".concat(D.Ns,"/subgraph/invalidate/").concat(A)),(0,q.Am)((0,a.jsx)(z.$,{status:"success",description:"Successfully traded ".concat(Number(ef).toLocaleString()," ").concat(es.toUpperCase())})),eg("0"),ew(e=>e+1)},onError(e){var t,r;let s=(0,R.e)(e.message,"trade");(0,q.Am)((0,a.jsx)(z.$,{status:"error",description:"".concat(s)})),(0,G.k)(e,"trade",{userAddress:A,tradeAmount:ef,resultAmount:ex,chainId:K,sellingAsset:{name:es,address:null==el?void 0:null===(t=el.data)||void 0===t?void 0:t.address},buyingAsset:{name:eo,address:null==ed?void 0:null===(r=ed.data)||void 0===r?void 0:r.address}})}});return n.useEffect(()=>{et(es),er(eo)},[er,et,es,eo]),n.useEffect(()=>{var e;eL.isSuccess&&em((0,S.formatUnits)(eL.data.to.amount,null==ed?void 0:null===(e=ed.data)||void 0===e?void 0:e.decimals))},[eL.data,ed.data]),n.useEffect(()=>{"0"===ef&&em("")},[ef]),n.useEffect(()=>{eZ.isSuccess&&es&&eo&&ed.isSuccess&&el.isSuccess&&eb("".concat(1," ").concat(ej?eo:es," = ").concat((0,N.RR)((0,S.formatUnits)(eZ.data.to.amount,ej?el.data.decimals:ed.data.decimals))," ").concat(ej?es:eo))},[es,eo,eZ,ed,ej]),n.useEffect(()=>{ek.a&&ee(parseFloat(ef)*ek.a)},[H,ef,ek]),n.useEffect(()=>{eC({stats:eF.data,tokenA:es,tokenB:eo})},[eF.data,es,eo]),(0,a.jsxs)("div",{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Trade | LeverFi"}),(0,a.jsx)("meta",{name:"description",content:"Margin Trade with 10x Leverage using Yield Bearing Assets"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(l.Z,{children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(h.Z,{marginBottom:"25px",children:(0,a.jsx)(f.Z,{variant:"modal-title",children:"Trade"})}),""!==es&&A?(0,a.jsxs)(h.Z,{display:"flex",flexDirection:"column",gap:"0.3rem",children:[(0,a.jsxs)(h.Z,{display:"flex",justifyContent:"space-between",children:[(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",children:"Existing Position: "}),eA.isLoading||el.isLoading?(0,a.jsx)(M.Z,{width:"40px"}):(0,a.jsxs)(f.Z,{layerStyle:"leverTradeSubText",children:[eA.isSuccess&&el.isSuccess?(0,N.dz)(parseFloat((0,S.formatUnits)(eA.data,el.data.decimals))):"--"," ",es?es.toUpperCase():""]})]}),(0,a.jsxs)(h.Z,{display:"flex",justifyContent:"space-between",children:[(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",children:"Max Sell Capacity: "}),eN.isLoading||eN.isFetching||eN.isIdle?(0,a.jsx)(M.Z,{width:"40px"}):(0,a.jsxs)(f.Z,{layerStyle:"leverTradeSubText",children:[eN.isSuccess?null===(m=eN.data)||void 0===m?void 0:m[0]:"0.0"," ",es?es.toUpperCase():""]})]})]}):(0,a.jsx)(h.Z,{display:"flex",justifyContent:"space-between",children:(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",children:"From: "})}),(0,a.jsx)(v.w,{tokenName:es,value:ef,setValue:e=>eg(e),isTokenDropdown:ei,disabled:Boolean(eO.isLoading),maxValue:eN.isSuccess?isNaN(parseFloat(null===(w=eN.data)||void 0===w?void 0:w[0]))?void 0:null===(b=eN.data)||void 0===b?void 0:null===(j=b[0])||void 0===j?void 0:j.replace(",",""):void 0,reset:ey}),(0,a.jsx)(U.zx,{variant:"unstyled",onClick(){""!==es&&""!==eo&&(ei(eo),en(es),eg("0"),em("0"))},padding:"0.4rem",border:"1px solid #000",borderRadius:"100%",w:"100%",maxW:"35px",mx:"auto",my:{base:"1rem",lg:"1.4rem"},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(c.Z,{src:u,alt:"down-arrow",boxSize:{base:"16px",lg:"20px"}})}),""!==eo&&A?(0,a.jsxs)(h.Z,{display:"flex",flexDirection:"column",gap:"0.3rem",children:[(0,a.jsxs)(h.Z,{display:"flex",justifyContent:"space-between",children:[(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",children:"Existing Position: "}),e_.isLoading?(0,a.jsx)(M.Z,{width:"40px"}):(0,a.jsxs)(f.Z,{layerStyle:"leverTradeSubText",children:[e_.isSuccess&&ed.isSuccess?(0,N.dz)(parseFloat((0,S.formatUnits)(e_.data,ed.data.decimals))):"--"," ",eo?eo.toUpperCase():""]})]}),(0,a.jsxs)(h.Z,{display:"flex",justifyContent:"space-between",children:[(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",children:"Max Buy Capacity: "}),eN.isSuccess&&A?eN.isLoading||eN.isFetching||eN.isIdle?(0,a.jsx)(M.Z,{width:"40px"}):(0,a.jsxs)(f.Z,{layerStyle:"leverTradeSubText",children:[null===(E=eN.data)||void 0===E?void 0:E[1]," ",eo?eo.toUpperCase():""]}):(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",children:"0.0"})]})]}):(0,a.jsx)(h.Z,{display:"flex",justifyContent:"space-between",children:(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",children:"To: "})}),(0,a.jsx)(v.Z,{tokenName:eo,value:ex,setValue(){},isTokenDropdown:en,conversionSection:[eS,eE],disabled:Boolean(eO.isLoading),pointerEvents:"none"}),(0,a.jsxs)(L.pT,{in:Boolean(""!==es&&""!==eo),children:[(0,a.jsxs)(h.Z,{display:"flex",justifyContent:"center",alignItems:"center",my:"1rem",children:[(0,a.jsxs)(f.Z,{layerStyle:"leverTradeSubText",textAlign:"center",pr:"0.3rem",children:["You're selling"," ",(0,a.jsxs)(h.Z,{as:"span",color:"lever.accent",children:[eU&&"~",eU?(0,N.RR)(ef):(0,S.commify)(ef)]})," ",es.toUpperCase()," for"," "]}),eL.isLoading||eL.isFetching||ed.isLoading||ed.isFetching?(0,a.jsx)(M.Z,{width:"40px"}):(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",color:"lever.accent",children:eL.isSuccess&&ed.isSuccess?(0,N.RR)((0,S.formatUnits)(eL.data.to.amount,ed.data.decimals)):"0"}),(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",pl:"0.3rem",children:eo?eo.toUpperCase():""})]}),A&&(0,a.jsxs)(h.Z,{display:"flex",justifyContent:"center",marginBlock:"-0.4rem 2rem",gap:"0.5rem",children:[(0,a.jsx)(f.Z,{layerStyle:"leverTradeSubText",textAlign:"center",children:"Leverage Used (After Trade):"}),eI.isLoading||eI.isFetching||eL.isFetching||eL.isLoading?(0,a.jsx)(M.Z,{width:"40px"}):(0,a.jsxs)(f.Z,{layerStyle:"leverTradeSubText",color:"lever.accent",children:[eI.isSuccess&&null!==(B=eI.data.toFixed(1))&&void 0!==B?B:"0.0","x"]})]})]}),""!==es&&""!==eo&&A&&(0,a.jsx)(I,{slippageValue:eu,setSlippageValue:ep,isCustomSlippage:ev,setIsCustomSlippage:eh,slippageOptions:J}),(0,a.jsx)(Y,{tradeMutate:eO,account:A,showConnect:_,isUserAbleToTrade:eQ,allAccountData:ec,quote:eL})]})})]})};var K=X}},function(e){e.O(0,[787,828,419,774,888,179],function(){return e(e.s=32786)}),_N_E=e.O()}]);